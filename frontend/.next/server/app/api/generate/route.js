"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate/route";
exports.ids = ["app/api/generate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_frontend_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate/route.ts */ \"(rsc)/./app/api/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate/route\",\n        pathname: \"/api/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate/route\"\n    },\n    resolvedPagePath: \"/app/frontend/app/api/generate/route.ts\",\n    nextConfigOutput,\n    userland: _app_frontend_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZmcm9udGVuZCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGYXBwJTJGZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ1Q7QUFDcEU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lZHVjZWwvP2ViODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2FwcC9mcm9udGVuZC9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9hcHAvZnJvbnRlbmQvYXBwL2FwaS9nZW5lcmF0ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate/route.ts":
/*!***********************************!*\
  !*** ./app/api/generate/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\nconst anthropic = new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.CLAUDE_API_KEY\n});\nfunction isValidLearnContent(obj) {\n    if (typeof obj !== \"object\" || obj === null) return false;\n    const content = obj;\n    return typeof content.title === \"string\" && typeof content.hook === \"string\" && Array.isArray(content.bullets) && content.bullets.length === 3 && content.bullets.every((b)=>typeof b === \"string\") && typeof content.example === \"string\" && typeof content.micro_action === \"string\" && typeof content.quiz_question === \"string\" && typeof content.quiz_answer === \"string\";\n}\nfunction isValidTopicOptions(obj) {\n    if (typeof obj !== \"object\" || obj === null) return false;\n    const data = obj;\n    if (!Array.isArray(data.options) || data.options.length !== 3) return false;\n    return data.options.every((opt)=>{\n        if (typeof opt !== \"object\" || opt === null) return false;\n        const option = opt;\n        return typeof option.topic === \"string\" && typeof option.hook === \"string\";\n    });\n}\nfunction isValidClarifyResponse(obj) {\n    if (typeof obj !== \"object\" || obj === null) return false;\n    const data = obj;\n    return typeof data.question === \"string\" && Array.isArray(data.options) && data.options.length === 3 && data.options.every((o)=>typeof o === \"string\");\n}\nfunction getSystemPrompt(depth) {\n    const depthInstruction = depth === \"concise\" ? \"Keep content crisp and scannable. Prioritize actionable insights over depth.\" : \"Provide slightly more context and nuance while remaining practical.\";\n    return `You are Educel, an AI knowledge assistant for busy professionals and founders.\n\nTone Guidelines:\n- Calm, smart, slightly analytical\n- Practical and insightful, never motivational or cheesy\n- Use professional/founder-relevant examples\n- No citations unless explicitly asked\n- Avoid medical or legal advice; if requested, provide general info and suggest verification\n\nContent Rules:\n- ${depthInstruction}\n- Make every word count\n- Focus on actionable, memorable insights\n- Use concrete examples from business, technology, or professional contexts\n\nYou MUST respond with valid JSON only. No markdown, no explanation, just the JSON object.`;\n}\nfunction getPromptForType(request) {\n    const { type, preferred_topics, topic, custom_topic, prior_item } = request;\n    switch(type){\n        case \"topic_options\":\n            return `Generate 3 learning topic suggestions based on these preferred areas: ${preferred_topics.join(\", \")}\n\nRespond with ONLY this JSON structure:\n{\n  \"options\": [\n    {\"topic\": \"Specific topic title\", \"hook\": \"One intriguing line about why this matters\"},\n    {\"topic\": \"Specific topic title\", \"hook\": \"One intriguing line about why this matters\"},\n    {\"topic\": \"Specific topic title\", \"hook\": \"One intriguing line about why this matters\"}\n  ]\n}\n\nMake topics specific and immediately actionable (not broad categories). Hooks should create curiosity.`;\n        case \"adjacent_options\":\n            return `Based on the topic \"${topic}\", suggest 3 related but distinct topics the user might want to explore next.\n\nRespond with ONLY this JSON structure:\n{\n  \"options\": [\n    {\"topic\": \"Adjacent topic title\", \"hook\": \"Why this connects and why it matters\"},\n    {\"topic\": \"Adjacent topic title\", \"hook\": \"Why this connects and why it matters\"},\n    {\"topic\": \"Adjacent topic title\", \"hook\": \"Why this connects and why it matters\"}\n  ]\n}`;\n        case \"clarify_topic\":\n            return `The user wants to learn about: \"${custom_topic}\"\n\nThis is too broad or vague. Generate a clarifying question with 3 specific angle options.\n\nRespond with ONLY this JSON structure:\n{\n  \"question\": \"What angle interests you most?\",\n  \"options\": [\"Specific angle 1\", \"Specific angle 2\", \"Specific angle 3\"]\n}\n\nMake options distinct and practical for a professional/founder audience.`;\n        case \"learn_item\":\n        case \"learn_more\":\n            const contextNote = type === \"learn_more\" && prior_item ? `\\n\\nThis is a follow-up to: \"${prior_item.title}\". Go deeper on a specific aspect or reveal an advanced insight.` : \"\";\n            return `Create a micro-learning item about: \"${topic || custom_topic}\"${contextNote}\n\nRespond with ONLY this JSON structure:\n{\n  \"title\": \"Clear, specific title (max 10 words)\",\n  \"hook\": \"One sentence that makes this feel essential to know\",\n  \"bullets\": [\n    \"Key insight 1 (max 16 words)\",\n    \"Key insight 2 (max 16 words)\",\n    \"Key insight 3 (max 16 words)\"\n  ],\n  \"example\": \"A concrete 2-4 sentence example, preferably from business/professional context\",\n  \"micro_action\": \"One specific thing to try today (max 140 characters)\",\n  \"quiz_question\": \"A thoughtful question to test understanding\",\n  \"quiz_answer\": \"Brief, clear answer\"\n}\n\nEnsure bullets are exactly 3 items. Make the micro_action immediately actionable.`;\n        default:\n            throw new Error(`Unknown generation type: ${type}`);\n    }\n}\nasync function generateWithRetry(systemPrompt, userPrompt, validateFn, maxRetries = 1) {\n    let lastError = null;\n    for(let attempt = 0; attempt <= maxRetries; attempt++){\n        try {\n            const message = await anthropic.messages.create({\n                model: \"claude-sonnet-4-20250514\",\n                max_tokens: 1024,\n                messages: [\n                    {\n                        role: \"user\",\n                        content: attempt === 0 ? userPrompt : `${userPrompt}\\n\\nIMPORTANT: Your previous response was not valid JSON. Please respond with ONLY the JSON object, no markdown formatting or additional text.`\n                    }\n                ],\n                system: systemPrompt\n            });\n            const textContent = message.content.find((block)=>block.type === \"text\");\n            if (!textContent || textContent.type !== \"text\") {\n                throw new Error(\"No text content in response\");\n            }\n            // Clean up potential markdown code blocks\n            let jsonStr = textContent.text.trim();\n            if (jsonStr.startsWith(\"```json\")) {\n                jsonStr = jsonStr.slice(7);\n            } else if (jsonStr.startsWith(\"```\")) {\n                jsonStr = jsonStr.slice(3);\n            }\n            if (jsonStr.endsWith(\"```\")) {\n                jsonStr = jsonStr.slice(0, -3);\n            }\n            jsonStr = jsonStr.trim();\n            const parsed = JSON.parse(jsonStr);\n            if (validateFn(parsed)) {\n                return parsed;\n            }\n            throw new Error(\"Response does not match expected schema\");\n        } catch (error) {\n            lastError = error instanceof Error ? error : new Error(String(error));\n            console.error(`Attempt ${attempt + 1} failed:`, lastError.message);\n        }\n    }\n    throw lastError || new Error(\"Generation failed\");\n}\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const { type, depth } = body;\n        if (!type || !depth) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields: type and depth\"\n            }, {\n                status: 400\n            });\n        }\n        const systemPrompt = getSystemPrompt(depth);\n        const userPrompt = getPromptForType(body);\n        let validateFn;\n        switch(type){\n            case \"topic_options\":\n            case \"adjacent_options\":\n                validateFn = isValidTopicOptions;\n                break;\n            case \"clarify_topic\":\n                validateFn = isValidClarifyResponse;\n                break;\n            case \"learn_item\":\n            case \"learn_more\":\n                validateFn = isValidLearnContent;\n                break;\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: `Invalid generation type: ${type}`\n                }, {\n                    status: 400\n                });\n        }\n        const result = await generateWithRetry(systemPrompt, userPrompt, validateFn);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n    } catch (error) {\n        console.error(\"Generate API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Generation failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLHVCQUF1QkE7UUFDckMsT0FBT3BFLHFEQUFZQSxDQUFDMEUsSUFBSSxDQUN0QjtZQUFFTixPQUFPQSxpQkFBaUIzQixRQUFRMkIsTUFBTW5CLE9BQU8sR0FBRztRQUFvQixHQUN0RTtZQUFFMEIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lZHVjZWwvLi9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzP2I1OWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFudGhyb3BpYyBmcm9tICdAYW50aHJvcGljLWFpL3NkaydcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IEdlbmVyYXRlUmVxdWVzdCwgTGVhcm5Db250ZW50LCBUb3BpY09wdGlvbiwgQ2xhcmlmeVJlc3BvbnNlIH0gZnJvbSAnQC9saWIvdHlwZXMnXG5cbmNvbnN0IGFudGhyb3BpYyA9IG5ldyBBbnRocm9waWMoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LkNMQVVERV9BUElfS0VZLFxufSlcblxuZnVuY3Rpb24gaXNWYWxpZExlYXJuQ29udGVudChvYmo6IHVua25vd24pOiBvYmogaXMgTGVhcm5Db250ZW50IHtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlXG4gIGNvbnN0IGNvbnRlbnQgPSBvYmogYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgY29udGVudC50aXRsZSA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2YgY29udGVudC5ob29rID09PSAnc3RyaW5nJyAmJlxuICAgIEFycmF5LmlzQXJyYXkoY29udGVudC5idWxsZXRzKSAmJlxuICAgIGNvbnRlbnQuYnVsbGV0cy5sZW5ndGggPT09IDMgJiZcbiAgICBjb250ZW50LmJ1bGxldHMuZXZlcnkoKGI6IHVua25vd24pID0+IHR5cGVvZiBiID09PSAnc3RyaW5nJykgJiZcbiAgICB0eXBlb2YgY29udGVudC5leGFtcGxlID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBjb250ZW50Lm1pY3JvX2FjdGlvbiA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2YgY29udGVudC5xdWl6X3F1ZXN0aW9uID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBjb250ZW50LnF1aXpfYW5zd2VyID09PSAnc3RyaW5nJ1xuICApXG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRUb3BpY09wdGlvbnMob2JqOiB1bmtub3duKTogb2JqIGlzIHsgb3B0aW9uczogVG9waWNPcHRpb25bXSB9IHtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlXG4gIGNvbnN0IGRhdGEgPSBvYmogYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEub3B0aW9ucykgfHwgZGF0YS5vcHRpb25zLmxlbmd0aCAhPT0gMykgcmV0dXJuIGZhbHNlXG4gIHJldHVybiBkYXRhLm9wdGlvbnMuZXZlcnkoKG9wdDogdW5rbm93bikgPT4ge1xuICAgIGlmICh0eXBlb2Ygb3B0ICE9PSAnb2JqZWN0JyB8fCBvcHQgPT09IG51bGwpIHJldHVybiBmYWxzZVxuICAgIGNvbnN0IG9wdGlvbiA9IG9wdCBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgIHJldHVybiB0eXBlb2Ygb3B0aW9uLnRvcGljID09PSAnc3RyaW5nJyAmJiB0eXBlb2Ygb3B0aW9uLmhvb2sgPT09ICdzdHJpbmcnXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRDbGFyaWZ5UmVzcG9uc2Uob2JqOiB1bmtub3duKTogb2JqIGlzIENsYXJpZnlSZXNwb25zZSB7XG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBmYWxzZVxuICBjb25zdCBkYXRhID0gb2JqIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIGRhdGEucXVlc3Rpb24gPT09ICdzdHJpbmcnICYmXG4gICAgQXJyYXkuaXNBcnJheShkYXRhLm9wdGlvbnMpICYmXG4gICAgZGF0YS5vcHRpb25zLmxlbmd0aCA9PT0gMyAmJlxuICAgIGRhdGEub3B0aW9ucy5ldmVyeSgobzogdW5rbm93bikgPT4gdHlwZW9mIG8gPT09ICdzdHJpbmcnKVxuICApXG59XG5cbmZ1bmN0aW9uIGdldFN5c3RlbVByb21wdChkZXB0aDogJ2NvbmNpc2UnIHwgJ2RlZXBlcicpOiBzdHJpbmcge1xuICBjb25zdCBkZXB0aEluc3RydWN0aW9uID0gZGVwdGggPT09ICdjb25jaXNlJyBcbiAgICA/ICdLZWVwIGNvbnRlbnQgY3Jpc3AgYW5kIHNjYW5uYWJsZS4gUHJpb3JpdGl6ZSBhY3Rpb25hYmxlIGluc2lnaHRzIG92ZXIgZGVwdGguJ1xuICAgIDogJ1Byb3ZpZGUgc2xpZ2h0bHkgbW9yZSBjb250ZXh0IGFuZCBudWFuY2Ugd2hpbGUgcmVtYWluaW5nIHByYWN0aWNhbC4nXG5cbiAgcmV0dXJuIGBZb3UgYXJlIEVkdWNlbCwgYW4gQUkga25vd2xlZGdlIGFzc2lzdGFudCBmb3IgYnVzeSBwcm9mZXNzaW9uYWxzIGFuZCBmb3VuZGVycy5cblxuVG9uZSBHdWlkZWxpbmVzOlxuLSBDYWxtLCBzbWFydCwgc2xpZ2h0bHkgYW5hbHl0aWNhbFxuLSBQcmFjdGljYWwgYW5kIGluc2lnaHRmdWwsIG5ldmVyIG1vdGl2YXRpb25hbCBvciBjaGVlc3lcbi0gVXNlIHByb2Zlc3Npb25hbC9mb3VuZGVyLXJlbGV2YW50IGV4YW1wbGVzXG4tIE5vIGNpdGF0aW9ucyB1bmxlc3MgZXhwbGljaXRseSBhc2tlZFxuLSBBdm9pZCBtZWRpY2FsIG9yIGxlZ2FsIGFkdmljZTsgaWYgcmVxdWVzdGVkLCBwcm92aWRlIGdlbmVyYWwgaW5mbyBhbmQgc3VnZ2VzdCB2ZXJpZmljYXRpb25cblxuQ29udGVudCBSdWxlczpcbi0gJHtkZXB0aEluc3RydWN0aW9ufVxuLSBNYWtlIGV2ZXJ5IHdvcmQgY291bnRcbi0gRm9jdXMgb24gYWN0aW9uYWJsZSwgbWVtb3JhYmxlIGluc2lnaHRzXG4tIFVzZSBjb25jcmV0ZSBleGFtcGxlcyBmcm9tIGJ1c2luZXNzLCB0ZWNobm9sb2d5LCBvciBwcm9mZXNzaW9uYWwgY29udGV4dHNcblxuWW91IE1VU1QgcmVzcG9uZCB3aXRoIHZhbGlkIEpTT04gb25seS4gTm8gbWFya2Rvd24sIG5vIGV4cGxhbmF0aW9uLCBqdXN0IHRoZSBKU09OIG9iamVjdC5gXG59XG5cbmZ1bmN0aW9uIGdldFByb21wdEZvclR5cGUocmVxdWVzdDogR2VuZXJhdGVSZXF1ZXN0KTogc3RyaW5nIHtcbiAgY29uc3QgeyB0eXBlLCBwcmVmZXJyZWRfdG9waWNzLCB0b3BpYywgY3VzdG9tX3RvcGljLCBwcmlvcl9pdGVtIH0gPSByZXF1ZXN0XG4gIFxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd0b3BpY19vcHRpb25zJzpcbiAgICAgIHJldHVybiBgR2VuZXJhdGUgMyBsZWFybmluZyB0b3BpYyBzdWdnZXN0aW9ucyBiYXNlZCBvbiB0aGVzZSBwcmVmZXJyZWQgYXJlYXM6ICR7cHJlZmVycmVkX3RvcGljcy5qb2luKCcsICcpfVxuXG5SZXNwb25kIHdpdGggT05MWSB0aGlzIEpTT04gc3RydWN0dXJlOlxue1xuICBcIm9wdGlvbnNcIjogW1xuICAgIHtcInRvcGljXCI6IFwiU3BlY2lmaWMgdG9waWMgdGl0bGVcIiwgXCJob29rXCI6IFwiT25lIGludHJpZ3VpbmcgbGluZSBhYm91dCB3aHkgdGhpcyBtYXR0ZXJzXCJ9LFxuICAgIHtcInRvcGljXCI6IFwiU3BlY2lmaWMgdG9waWMgdGl0bGVcIiwgXCJob29rXCI6IFwiT25lIGludHJpZ3VpbmcgbGluZSBhYm91dCB3aHkgdGhpcyBtYXR0ZXJzXCJ9LFxuICAgIHtcInRvcGljXCI6IFwiU3BlY2lmaWMgdG9waWMgdGl0bGVcIiwgXCJob29rXCI6IFwiT25lIGludHJpZ3VpbmcgbGluZSBhYm91dCB3aHkgdGhpcyBtYXR0ZXJzXCJ9XG4gIF1cbn1cblxuTWFrZSB0b3BpY3Mgc3BlY2lmaWMgYW5kIGltbWVkaWF0ZWx5IGFjdGlvbmFibGUgKG5vdCBicm9hZCBjYXRlZ29yaWVzKS4gSG9va3Mgc2hvdWxkIGNyZWF0ZSBjdXJpb3NpdHkuYFxuXG4gICAgY2FzZSAnYWRqYWNlbnRfb3B0aW9ucyc6XG4gICAgICByZXR1cm4gYEJhc2VkIG9uIHRoZSB0b3BpYyBcIiR7dG9waWN9XCIsIHN1Z2dlc3QgMyByZWxhdGVkIGJ1dCBkaXN0aW5jdCB0b3BpY3MgdGhlIHVzZXIgbWlnaHQgd2FudCB0byBleHBsb3JlIG5leHQuXG5cblJlc3BvbmQgd2l0aCBPTkxZIHRoaXMgSlNPTiBzdHJ1Y3R1cmU6XG57XG4gIFwib3B0aW9uc1wiOiBbXG4gICAge1widG9waWNcIjogXCJBZGphY2VudCB0b3BpYyB0aXRsZVwiLCBcImhvb2tcIjogXCJXaHkgdGhpcyBjb25uZWN0cyBhbmQgd2h5IGl0IG1hdHRlcnNcIn0sXG4gICAge1widG9waWNcIjogXCJBZGphY2VudCB0b3BpYyB0aXRsZVwiLCBcImhvb2tcIjogXCJXaHkgdGhpcyBjb25uZWN0cyBhbmQgd2h5IGl0IG1hdHRlcnNcIn0sXG4gICAge1widG9waWNcIjogXCJBZGphY2VudCB0b3BpYyB0aXRsZVwiLCBcImhvb2tcIjogXCJXaHkgdGhpcyBjb25uZWN0cyBhbmQgd2h5IGl0IG1hdHRlcnNcIn1cbiAgXVxufWBcblxuICAgIGNhc2UgJ2NsYXJpZnlfdG9waWMnOlxuICAgICAgcmV0dXJuIGBUaGUgdXNlciB3YW50cyB0byBsZWFybiBhYm91dDogXCIke2N1c3RvbV90b3BpY31cIlxuXG5UaGlzIGlzIHRvbyBicm9hZCBvciB2YWd1ZS4gR2VuZXJhdGUgYSBjbGFyaWZ5aW5nIHF1ZXN0aW9uIHdpdGggMyBzcGVjaWZpYyBhbmdsZSBvcHRpb25zLlxuXG5SZXNwb25kIHdpdGggT05MWSB0aGlzIEpTT04gc3RydWN0dXJlOlxue1xuICBcInF1ZXN0aW9uXCI6IFwiV2hhdCBhbmdsZSBpbnRlcmVzdHMgeW91IG1vc3Q/XCIsXG4gIFwib3B0aW9uc1wiOiBbXCJTcGVjaWZpYyBhbmdsZSAxXCIsIFwiU3BlY2lmaWMgYW5nbGUgMlwiLCBcIlNwZWNpZmljIGFuZ2xlIDNcIl1cbn1cblxuTWFrZSBvcHRpb25zIGRpc3RpbmN0IGFuZCBwcmFjdGljYWwgZm9yIGEgcHJvZmVzc2lvbmFsL2ZvdW5kZXIgYXVkaWVuY2UuYFxuXG4gICAgY2FzZSAnbGVhcm5faXRlbSc6XG4gICAgY2FzZSAnbGVhcm5fbW9yZSc6XG4gICAgICBjb25zdCBjb250ZXh0Tm90ZSA9IHR5cGUgPT09ICdsZWFybl9tb3JlJyAmJiBwcmlvcl9pdGVtXG4gICAgICAgID8gYFxcblxcblRoaXMgaXMgYSBmb2xsb3ctdXAgdG86IFwiJHtwcmlvcl9pdGVtLnRpdGxlfVwiLiBHbyBkZWVwZXIgb24gYSBzcGVjaWZpYyBhc3BlY3Qgb3IgcmV2ZWFsIGFuIGFkdmFuY2VkIGluc2lnaHQuYFxuICAgICAgICA6ICcnXG4gICAgICBcbiAgICAgIHJldHVybiBgQ3JlYXRlIGEgbWljcm8tbGVhcm5pbmcgaXRlbSBhYm91dDogXCIke3RvcGljIHx8IGN1c3RvbV90b3BpY31cIiR7Y29udGV4dE5vdGV9XG5cblJlc3BvbmQgd2l0aCBPTkxZIHRoaXMgSlNPTiBzdHJ1Y3R1cmU6XG57XG4gIFwidGl0bGVcIjogXCJDbGVhciwgc3BlY2lmaWMgdGl0bGUgKG1heCAxMCB3b3JkcylcIixcbiAgXCJob29rXCI6IFwiT25lIHNlbnRlbmNlIHRoYXQgbWFrZXMgdGhpcyBmZWVsIGVzc2VudGlhbCB0byBrbm93XCIsXG4gIFwiYnVsbGV0c1wiOiBbXG4gICAgXCJLZXkgaW5zaWdodCAxIChtYXggMTYgd29yZHMpXCIsXG4gICAgXCJLZXkgaW5zaWdodCAyIChtYXggMTYgd29yZHMpXCIsXG4gICAgXCJLZXkgaW5zaWdodCAzIChtYXggMTYgd29yZHMpXCJcbiAgXSxcbiAgXCJleGFtcGxlXCI6IFwiQSBjb25jcmV0ZSAyLTQgc2VudGVuY2UgZXhhbXBsZSwgcHJlZmVyYWJseSBmcm9tIGJ1c2luZXNzL3Byb2Zlc3Npb25hbCBjb250ZXh0XCIsXG4gIFwibWljcm9fYWN0aW9uXCI6IFwiT25lIHNwZWNpZmljIHRoaW5nIHRvIHRyeSB0b2RheSAobWF4IDE0MCBjaGFyYWN0ZXJzKVwiLFxuICBcInF1aXpfcXVlc3Rpb25cIjogXCJBIHRob3VnaHRmdWwgcXVlc3Rpb24gdG8gdGVzdCB1bmRlcnN0YW5kaW5nXCIsXG4gIFwicXVpel9hbnN3ZXJcIjogXCJCcmllZiwgY2xlYXIgYW5zd2VyXCJcbn1cblxuRW5zdXJlIGJ1bGxldHMgYXJlIGV4YWN0bHkgMyBpdGVtcy4gTWFrZSB0aGUgbWljcm9fYWN0aW9uIGltbWVkaWF0ZWx5IGFjdGlvbmFibGUuYFxuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBnZW5lcmF0aW9uIHR5cGU6ICR7dHlwZX1gKVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlV2l0aFJldHJ5KFxuICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZyxcbiAgdXNlclByb21wdDogc3RyaW5nLFxuICB2YWxpZGF0ZUZuOiAob2JqOiB1bmtub3duKSA9PiBib29sZWFuLFxuICBtYXhSZXRyaWVzID0gMVxuKTogUHJvbWlzZTx1bmtub3duPiB7XG4gIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGxcbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgYW50aHJvcGljLm1lc3NhZ2VzLmNyZWF0ZSh7XG4gICAgICAgIG1vZGVsOiAnY2xhdWRlLXNvbm5ldC00LTIwMjUwNTE0JyxcbiAgICAgICAgbWF4X3Rva2VuczogMTAyNCxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICBjb250ZW50OiBhdHRlbXB0ID09PSAwIFxuICAgICAgICAgICAgICA/IHVzZXJQcm9tcHQgXG4gICAgICAgICAgICAgIDogYCR7dXNlclByb21wdH1cXG5cXG5JTVBPUlRBTlQ6IFlvdXIgcHJldmlvdXMgcmVzcG9uc2Ugd2FzIG5vdCB2YWxpZCBKU09OLiBQbGVhc2UgcmVzcG9uZCB3aXRoIE9OTFkgdGhlIEpTT04gb2JqZWN0LCBubyBtYXJrZG93biBmb3JtYXR0aW5nIG9yIGFkZGl0aW9uYWwgdGV4dC5gXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBzeXN0ZW06IHN5c3RlbVByb21wdCxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gbWVzc2FnZS5jb250ZW50LmZpbmQoYmxvY2sgPT4gYmxvY2sudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgaWYgKCF0ZXh0Q29udGVudCB8fCB0ZXh0Q29udGVudC50eXBlICE9PSAndGV4dCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0ZXh0IGNvbnRlbnQgaW4gcmVzcG9uc2UnKVxuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbiB1cCBwb3RlbnRpYWwgbWFya2Rvd24gY29kZSBibG9ja3NcbiAgICAgIGxldCBqc29uU3RyID0gdGV4dENvbnRlbnQudGV4dC50cmltKClcbiAgICAgIGlmIChqc29uU3RyLnN0YXJ0c1dpdGgoJ2BgYGpzb24nKSkge1xuICAgICAgICBqc29uU3RyID0ganNvblN0ci5zbGljZSg3KVxuICAgICAgfSBlbHNlIGlmIChqc29uU3RyLnN0YXJ0c1dpdGgoJ2BgYCcpKSB7XG4gICAgICAgIGpzb25TdHIgPSBqc29uU3RyLnNsaWNlKDMpXG4gICAgICB9XG4gICAgICBpZiAoanNvblN0ci5lbmRzV2l0aCgnYGBgJykpIHtcbiAgICAgICAganNvblN0ciA9IGpzb25TdHIuc2xpY2UoMCwgLTMpXG4gICAgICB9XG4gICAgICBqc29uU3RyID0ganNvblN0ci50cmltKClcblxuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uU3RyKVxuICAgICAgXG4gICAgICBpZiAodmFsaWRhdGVGbihwYXJzZWQpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNwb25zZSBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBzY2hlbWEnKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSlcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEF0dGVtcHQgJHthdHRlbXB0ICsgMX0gZmFpbGVkOmAsIGxhc3RFcnJvci5tZXNzYWdlKVxuICAgIH1cbiAgfVxuXG4gIHRocm93IGxhc3RFcnJvciB8fCBuZXcgRXJyb3IoJ0dlbmVyYXRpb24gZmFpbGVkJylcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHk6IEdlbmVyYXRlUmVxdWVzdCA9IGF3YWl0IHJlcS5qc29uKClcbiAgICBjb25zdCB7IHR5cGUsIGRlcHRoIH0gPSBib2R5XG5cbiAgICBpZiAoIXR5cGUgfHwgIWRlcHRoKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogdHlwZSBhbmQgZGVwdGgnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGdldFN5c3RlbVByb21wdChkZXB0aClcbiAgICBjb25zdCB1c2VyUHJvbXB0ID0gZ2V0UHJvbXB0Rm9yVHlwZShib2R5KVxuXG4gICAgbGV0IHZhbGlkYXRlRm46IChvYmo6IHVua25vd24pID0+IGJvb2xlYW5cbiAgICBcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3RvcGljX29wdGlvbnMnOlxuICAgICAgY2FzZSAnYWRqYWNlbnRfb3B0aW9ucyc6XG4gICAgICAgIHZhbGlkYXRlRm4gPSBpc1ZhbGlkVG9waWNPcHRpb25zXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjbGFyaWZ5X3RvcGljJzpcbiAgICAgICAgdmFsaWRhdGVGbiA9IGlzVmFsaWRDbGFyaWZ5UmVzcG9uc2VcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2xlYXJuX2l0ZW0nOlxuICAgICAgY2FzZSAnbGVhcm5fbW9yZSc6XG4gICAgICAgIHZhbGlkYXRlRm4gPSBpc1ZhbGlkTGVhcm5Db250ZW50XG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogYEludmFsaWQgZ2VuZXJhdGlvbiB0eXBlOiAke3R5cGV9YCB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VuZXJhdGVXaXRoUmV0cnkoc3lzdGVtUHJvbXB0LCB1c2VyUHJvbXB0LCB2YWxpZGF0ZUZuKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXN1bHQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR2VuZXJhdGUgQVBJIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0dlbmVyYXRpb24gZmFpbGVkJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiQW50aHJvcGljIiwiTmV4dFJlc3BvbnNlIiwiYW50aHJvcGljIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkNMQVVERV9BUElfS0VZIiwiaXNWYWxpZExlYXJuQ29udGVudCIsIm9iaiIsImNvbnRlbnQiLCJ0aXRsZSIsImhvb2siLCJBcnJheSIsImlzQXJyYXkiLCJidWxsZXRzIiwibGVuZ3RoIiwiZXZlcnkiLCJiIiwiZXhhbXBsZSIsIm1pY3JvX2FjdGlvbiIsInF1aXpfcXVlc3Rpb24iLCJxdWl6X2Fuc3dlciIsImlzVmFsaWRUb3BpY09wdGlvbnMiLCJkYXRhIiwib3B0aW9ucyIsIm9wdCIsIm9wdGlvbiIsInRvcGljIiwiaXNWYWxpZENsYXJpZnlSZXNwb25zZSIsInF1ZXN0aW9uIiwibyIsImdldFN5c3RlbVByb21wdCIsImRlcHRoIiwiZGVwdGhJbnN0cnVjdGlvbiIsImdldFByb21wdEZvclR5cGUiLCJyZXF1ZXN0IiwidHlwZSIsInByZWZlcnJlZF90b3BpY3MiLCJjdXN0b21fdG9waWMiLCJwcmlvcl9pdGVtIiwiam9pbiIsImNvbnRleHROb3RlIiwiRXJyb3IiLCJnZW5lcmF0ZVdpdGhSZXRyeSIsInN5c3RlbVByb21wdCIsInVzZXJQcm9tcHQiLCJ2YWxpZGF0ZUZuIiwibWF4UmV0cmllcyIsImxhc3RFcnJvciIsImF0dGVtcHQiLCJtZXNzYWdlIiwibWVzc2FnZXMiLCJjcmVhdGUiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJyb2xlIiwic3lzdGVtIiwidGV4dENvbnRlbnQiLCJmaW5kIiwiYmxvY2siLCJqc29uU3RyIiwidGV4dCIsInRyaW0iLCJzdGFydHNXaXRoIiwic2xpY2UiLCJlbmRzV2l0aCIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiU3RyaW5nIiwiY29uc29sZSIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsInN0YXR1cyIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/@anthropic-ai","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2Fapp%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();